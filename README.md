# 🚦 Traffic_Assignment01


## 아두이노 동작 영상

[![프로젝트 시연 영상](https://img.youtube.com/vi/w8h2MnZb1uU/0.jpg)](https://youtu.be/w8h2MnZb1uU?si=IlxCggaI5-AUnTyC)


---


## 구현 기능
- 🟥 **빨간불 2초 유지**  
- 🟨 **첫 번째 노란불 0.5초 유지**  
- 🟩 **초록불 2초 유지**  
- 🟩 **초록 깜빡임 3회 (1초 동안 166ms 간격)**  
- 🟨 **두 번째 노란불 0.5초 유지**  
- 🔆 **밝기 조절 기능**  


---

## 하드웨어 설명


### 버튼 연결
총 3개의 버튼이 사용되며, **각 버튼은 아두이노의 디지털 입력 핀과 연결**되어 있습니다.

| 버튼 번호 | 아두이노 핀 | 기능 |
|-----------|-----------|----------------|
| **1번 버튼** | `D4` | Red LED만 점등 / 신호등 기본기능 재시작 |
| **2번 버튼** | `D5` | 모든 LED 깜빡이기 / 신호등 기본기능 재시작 |
| **3번 버튼** | `D6` | 신호등 기본기능 on/off |

**각 버튼은 `INPUT_PULLUP` 모드로 설정되어 있어, 눌렀을 때 LOW 신호를 감지합니다.**  
**인터럽트를 활용하여 버튼을 누를 때마다 즉각적인 반응이 가능하도록 구현되었습니다.**  

---

### LED 연결
각 신호등 LED는 아두이노의 **PWM 지원 디지털 핀**에 연결되어 있으며, `analogWrite()` 를 통해 밝기를 조절할 수 있습니다.

| LED 색상 | 아두이노 핀 | 역할 |
|-----------|-----------|----------------|
| **빨간 LED** | `D9` | 신호등 기본기능 (2초) |
| **노란 LED** | `D10` | 신호등 기본기능1 (0.5초) |
| **초록 LED** | `D11` | 신호등 기본기능 (2초), 깜빡임(6회) |
| **노란 LED** | `D10` | 신호등 기본기능2 (0.5초) |

**PWM을 사용하여 밝기를 조절할 수 있도록 설정되었습니다.**  

---

### 밝기 조절용 가변저항 (Potentiometer)
신호등 LED의 밝기는 **가변저항(Potentiometer)** 를 사용하여 조절됩니다.

| 구성 요소 | 아두이노 핀 | 역할 |
|-----------|-----------|----------------|
| **가변저항** | `A0` (아날로그 입력) | LED 밝기 조절 |
| **전원 연결** | `5V` 및 `GND` | 아두이노에서 전력 공급 |

**아날로그 입력 핀(`A0`)에서 값을 읽어 0-1023 범위의 값을 받아 0-255로 변환하여 LED 밝기를 조절합니다.**  
**`map()` 함수를 사용하여 가변저항의 입력값을 LED의 `analogWrite()` 값으로 변환합니다.**  

---


### 핀 연결 세부사항

| 핀 번호 | 연결된 부품 | 설명 |
|--------|------------|------------------------------------------------|
| **D9**  | 초록 LED(Green) | PWM 출력 핀, 가변저항을 통해 밝기 제어 가능 |
| **D10** | 노랑 LED(Yellow) | PWM 출력 핀, 가변저항을 통해 밝기 제어 가능 |
| **D11** | 빨강 LED(Red) | PWM 출력 핀, 가변저항을 통해 밝기 제어 가능 |
| **D4**  | 버튼1 | 신호등 정지/재시작 버튼, 내부 풀업(Input Pull-up) |
| **D5**  | 버튼2 | 전체 LED 깜빡이기 버튼, 내부 풀업(Input Pull-up) |
| **D6**  | 버튼3 | 신호등 초기화 버튼, 내부 풀업(Input Pull-up) |
| **A0**  | 가변저항 | 0-1023 범위를 읽어 LED 밝기(0-255)로 매핑 |
| **5V/GND** | 전원, 접지 | LED, 버튼, 가변저항에 전력 공급 및 회로 구성 위한 공통 접지 |


---

## main.cpp 코드에서의 동작 원리
main.cpp 코드에서는 **TaskScheduler 라이브러리**를 활용하여 비동기적인 신호등 동작을 구현하였습니다.

- **기본적인 신호등 기능**
  
  1️⃣ **빨간불** (2초)  
  2️⃣ **첫 번째 노란불** (0.5초)  
  3️⃣ **초록불** (2초)  
  4️⃣ **초록불 깜빡임** (1초 동안 6번 깜빡임, 166ms 간격)  
  5️⃣ **두 번째 노란불** (0.5초)  
  6️⃣ **빨간불로 돌아감**  

- **버튼 조작 기능**
  - 1번 버튼(`D4`): **Red LED만 점등 / 신호등 기본기능 재시작**  
  - 2번 버튼(`D5`): **모든 LED 깜빡이기**  
  - 3번 버튼(`D6`): **신호등 기본기능 on/off**  

- **가변저항을 통한 밝기 조절**
  - 아날로그 핀(`A0`)에서 값을 읽어 0~255 범위로 변환.
  - `analogWrite()`를 이용하여 **모든 LED의 밝기를 조절**.

---

## 회로 연결 이미지

아래 이미지는 틴커캐드로 구현한 대략적인 회로입니다.
![image](https://github.com/user-attachments/assets/b9275c55-3366-44a6-963f-a3e2bb1c6dd2)

실제 구현 회로는 아래와 같습니다.
![KakaoTalk_20250316_111255504](https://github.com/user-attachments/assets/460e87d4-3dca-4f92-92d1-01fc973b2698)
